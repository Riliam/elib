{% for author in authors %}
<div>
  <h4 class="inline-header"> {{author.name}} </h4>
  <small><a href="#" class="edit-author" data-toggle="modal" data-target="#id-modal-author" data-authorname="{{author.name}}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></small> 
  <small><a href="#" class="delete-author" data-authorid="{{author.id}}"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></small>
  <p>
    Книги этого автора: 
    {{ author.get_booktitles_list()|join(', ') }}

  </p>
</div>
<hr>
{% endfor %}
<script>

  $(document).ready(function(){
    $(".delete-author").on("click", function() {
      var authorid = $(this).attr("data-authorid");
      $.ajax({
        type: "POST",
        url: "/_delete_author",
        data: {authorid: authorid},
        success: function(response){ 
          $("#id-enumerate-books").html(response.books_markup);
          $("#id-enumerate-authors").html(response.authors_markup); 
        },
        error: function(response){
          alert("Error");
        }
      });
    });
  });

  $(".edit-author").on("click", function() {
    var authorname = $(this).attr("data-authorname");
    $("#id-input-author-name").val(authorname);
    $("#id-title-author-form").html("Редактировать автора " + authorname);
  });

  $("#id-add-author").on("click", function() {
    $("#id-input-author-name").val("");
    $("#id-title-author-form").html("Добавить автора");
  });
</script>
